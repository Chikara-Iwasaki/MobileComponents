var forcetk=window.forcetk;void 0===forcetk&&(forcetk={});
void 0===forcetk.Client&&(void 0===window.$j&&($j=$),forcetk.Client=function(a,c,b){this.clientId=a;this.loginUrl=c||"https://login.salesforce.com/";"undefined"===typeof b||null===b?(this.proxyUrl="file:"===location.protocol?null:location.protocol+"//"+location.hostname+"/services/proxy",this.authzHeader="Authorization"):(this.proxyUrl=b,this.authzHeader="X-Authorization");this.instanceUrl=this.apiVersion=this.sessionId=this.refreshToken=null;this.asyncAjax=!0;this.userAgentString=null},forcetk.Client.prototype.setUserAgentString=
function(a){this.userAgentString=a},forcetk.Client.prototype.setRefreshToken=function(a){this.refreshToken=a},forcetk.Client.prototype.refreshAccessToken=function(a,c){var b=this,e=this.loginUrl+"/services/oauth2/token";return $j.ajax({type:"POST",url:null!==this.proxyUrl?this.proxyUrl:e,cache:!1,processData:!1,data:"grant_type=refresh_token&client_id="+this.clientId+"&refresh_token="+this.refreshToken,success:a,error:c,dataType:"json",beforeSend:function(a){null!==b.proxyUrl&&a.setRequestHeader("SalesforceProxy-Endpoint",
e)}})},forcetk.Client.prototype.setSessionToken=function(a,c,b){this.sessionId=a;this.apiVersion="undefined"===typeof c||null===c?"v24.0":c;"undefined"===typeof b||null==b?(a=location.hostname.split("."),c=null,c=4==a.length&&"my"===a[1]?a[0]+"."+a[1]:3==a.length?a[0]:a[1],this.instanceUrl="https://"+c+".salesforce.com"):this.instanceUrl=b},forcetk.Client.prototype.ajax=function(a,c,b,e,h,g){var f=this,d=this.instanceUrl+"/services/data"+a;return $j.ajax({type:e||"GET",async:this.asyncAjax,url:null!==
this.proxyUrl?this.proxyUrl:d,contentType:"application/json",cache:!1,processData:!1,data:h,success:c,error:!this.refreshToken||g?b:function(d,g,k){401===d.status?f.refreshAccessToken(function(d){f.setSessionToken(d.access_token,null,d.instance_url);f.ajax(a,c,b,e,h,!0)},b):b(d,g,k)},dataType:"json",beforeSend:function(a){null!==f.proxyUrl&&a.setRequestHeader("SalesforceProxy-Endpoint",d);a.setRequestHeader(f.authzHeader,"Bearer "+f.sessionId);a.setRequestHeader("X-User-Agent","salesforce-toolkit-rest-javascript/"+
f.apiVersion);null!==f.userAgentString&&a.setRequestHeader("User-Agent",f.userAgentString)}})},forcetk.Client.prototype.getChatterFile=function(a,c,b,e,h){var g=this,f=this.instanceUrl+a,d=new XMLHttpRequest;d.open("GET",null!==this.proxyUrl?this.proxyUrl:f,!0);d.responseType="arraybuffer";d.setRequestHeader(g.authzHeader,"Bearer "+g.sessionId);d.setRequestHeader("X-User-Agent","salesforce-toolkit-rest-javascript/"+g.apiVersion);null!==g.userAgentString&&xhr.setRequestHeader("User-Agent",g.userAgentString);
null!==this.proxyUrl&&d.setRequestHeader("SalesforceProxy-Endpoint",f);d.onreadystatechange=function(){if(4==d.readyState)if(200==d.status)try{b(d.response)}catch(f){alert("Error reading the response: "+f.toString())}else 401==d.status&&!h?g.refreshAccessToken(function(d){g.setSessionToken(d.access_token,null,d.instance_url);g.getChatterFile(a,c,b,e,!0)},e):e(d,d.statusText,d.response)};d.send()},forcetk.Client.prototype.apexrest=function(a,c,b,e,h,g,f){var d=this,j=this.instanceUrl+"/services/apexrest"+
a;return $j.ajax({type:e||"GET",async:this.asyncAjax,url:null!==this.proxyUrl?this.proxyUrl:j,contentType:"application/json",cache:!1,processData:!1,data:h,success:c,error:!this.refreshToken||f?b:function(f,k,j){401===f.status?d.refreshAccessToken(function(f){d.setSessionToken(f.access_token,null,f.instance_url);d.apexrest(a,c,b,e,h,g,!0)},b):b(f,k,j)},dataType:"json",beforeSend:function(a){null!==d.proxyUrl&&a.setRequestHeader("SalesforceProxy-Endpoint",j);null===g&&(g={});for(paramName in g)a.setRequestHeader(paramName,
g[paramName]);a.setRequestHeader(d.authzHeader,"Bearer "+d.sessionId);a.setRequestHeader("X-User-Agent","salesforce-toolkit-rest-javascript/"+d.apiVersion);null!==d.userAgentString&&a.setRequestHeader("User-Agent",d.userAgentString)}})},forcetk.Client.prototype.versions=function(a,c){return this.ajax("/",a,c)},forcetk.Client.prototype.resources=function(a,c){return this.ajax("/"+this.apiVersion+"/",a,c)},forcetk.Client.prototype.describeGlobal=function(a,c){return this.ajax("/"+this.apiVersion+"/sobjects/",
a,c)},forcetk.Client.prototype.metadata=function(a,c,b){return this.ajax("/"+this.apiVersion+"/sobjects/"+a+"/",c,b)},forcetk.Client.prototype.describe=function(a,c,b){return this.ajax("/"+this.apiVersion+"/sobjects/"+a+"/describe/",c,b)},forcetk.Client.prototype.create=function(a,c,b,e){return this.ajax("/"+this.apiVersion+"/sobjects/"+a+"/",b,e,"POST",JSON.stringify(c))},forcetk.Client.prototype.retrieve=function(a,c,b,e,h){h||(h=e,e=b,b=null);this.ajax("/"+this.apiVersion+"/sobjects/"+a+"/"+c+
(b?"?fields="+b:""),e,h)},forcetk.Client.prototype.upsert=function(a,c,b,e,h,g){return this.ajax("/"+this.apiVersion+"/sobjects/"+a+"/"+c+"/"+b+"?_HttpMethod=PATCH",h,g,"POST",JSON.stringify(e))},forcetk.Client.prototype.update=function(a,c,b,e,h){return this.ajax("/"+this.apiVersion+"/sobjects/"+a+"/"+c+"?_HttpMethod=PATCH",e,h,"POST",JSON.stringify(b))},forcetk.Client.prototype.del=function(a,c,b,e){return this.ajax("/"+this.apiVersion+"/sobjects/"+a+"/"+c,b,e,"DELETE")},forcetk.Client.prototype.query=
function(a,c,b){return this.ajax("/"+this.apiVersion+"/query?q="+escape(a),c,b)},forcetk.Client.prototype.queryMore=function(a,c,b){var e=a.indexOf("services/data");-1<e&&(a=a.substr(e+13));return this.ajax(a,c,b)},forcetk.Client.prototype.search=function(a,c,b){return this.ajax("/"+this.apiVersion+"/search?q="+escape(a),c,b)});